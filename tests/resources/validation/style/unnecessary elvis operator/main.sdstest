package validation.style.unnecessaryElvisOperator

fun f() -> result: Any?

pipeline test {

    // $TEST$ info "The left operand is never null, so the elvis operator is unnecessary (keep the left operand)."
    »1 ?: 2«;
    // $TEST$ info "The left operand is never null, so the elvis operator is unnecessary (keep the left operand)."
    »1 ?: null«;
    // $TEST$ no info "The left operand is never null, so the elvis operator is unnecessary (keep the left operand)."
    »null ?: 2«;
    // $TEST$ no info "The left operand is never null, so the elvis operator is unnecessary (keep the left operand)."
    »null ?: null«;

    // $TEST$ no info "The right operand is always null, so the elvis operator is unnecessary (keep the left operand)."
    »1 ?: 2«;
    // $TEST$ info "The right operand is always null, so the elvis operator is unnecessary (keep the left operand)."
    »f() ?: null«;
    // $TEST$ no info "The right operand is always null, so the elvis operator is unnecessary (keep the left operand)."
    »null ?: 2«;
    // $TEST$ no info "The right operand is always null, so the elvis operator is unnecessary (keep the left operand)."
    »null ?: null«;

    // $TEST$ no info "The left operand is always null, so the elvis operator is unnecessary (keep the right operand)."
    »1 ?: 2«;
    // $TEST$ no info "The left operand is always null, so the elvis operator is unnecessary (keep the right operand)."
    »1 ?: null«;
    // $TEST$ info "The left operand is always null, so the elvis operator is unnecessary (keep the right operand)."
    »null ?: 2«;
    // $TEST$ no info "The left operand is always null, so the elvis operator is unnecessary (keep the right operand)."
    »null ?: null«;

    // $TEST$ no info "Both operands are always null, so the elvis operator is unnecessary (replace it with null)."
    »1 ?: 2«;
    // $TEST$ no info "Both operands are always null, so the elvis operator is unnecessary (replace it with null)."
    »1 ?: null«;
    // $TEST$ no info "Both operands are always null, so the elvis operator is unnecessary (replace it with null)."
    »null ?: 2«;
    // $TEST$ info "Both operands are always null, so the elvis operator is unnecessary (replace it with null)."
    »null ?: null«;
}
